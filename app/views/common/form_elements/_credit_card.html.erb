<%#
# This file is part of the OpenWISP User Management System
#
# Copyright (C) 2012 OpenWISP.org
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#%>

<% if Configuration.get('credit_card_enabled') == "true" && owner.can_signup_via?(AccountCommon::VERIFY_BY_CREDIT_CARD) %>

    <% if owner.new_record? %>
        <div class="verification-block" style="display:none">
          <table>
            <tr>
              <td>
                <% if flash[:error] %>
                  <div class="clearb">&nbsp;</div>
                  <div class="input string required field_with_errors">
                    <div class="error"><%= flash[:error] %></div>
                   </div> 
                <% end %>                 
                <%= form.input :product_id, :label => t("product") do %>
                <%= form.select :product_id, options_for_select([[t("select_product"), ""]] + get_product_data_frontend.collect {|r| [r.name, r.id]}, (owner.product_id unless owner.product_id.nil?)) %>
    <% end %>
              </td>
            </tr>
          </table>
        </div>
    <% end %>

<% end %>
